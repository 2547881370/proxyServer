(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57c0c851"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1522:function(e,t,n){"use strict";var r=n("2667"),a=n.n(r);a.a},2667:function(e,t,n){},"3cfe":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c}));n("99af");var r=n("b775"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/person/addPerson",e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/person/deletePerson/".concat(e.personId,"/").concat(e.status),e)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/person/queryPerson",e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/person/updatePerson",e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/person/queryPersonByAddJob",e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])("/person/queryPersonAll",e)}},"841c":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),o=n("1d80"),i=n("129f"),s=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=a(e),l=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var u=s(o,l);return i(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},"94b0":function(e,t,n){"use strict";n.r(t);var r,a,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"infoUser"},[n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("div",{staticClass:"tree"},[n("el-tree",{attrs:{props:e.props,load:e.loadNode,lazy:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(r.label))]),n("span",[n("el-button",{attrs:{type:"text",size:e.SIZE},on:{click:function(){return e.append(a)}}},[e._v(" Append ")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(r,a)}}},[e._v(" Delete ")])],1)])}}])})],1)]),n("el-main",[n("div",{staticClass:"Main"},[n("div",{staticClass:"header"},[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-row",[n("el-col",{attrs:{span:21}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{prop:"keyQuery"}},[n("el-input",{attrs:{size:e.SIZE,placeholder:"请输入姓名/单位/职务",clearable:""},model:{value:e.form.keyQuery,callback:function(t){e.$set(e.form,"keyQuery",t)},expression:"form.keyQuery"}})],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{prop:"personType"}},[n("el-select",{attrs:{placeholder:"请选择人员类别",size:e.SIZE,clearable:""},model:{value:e.form.personType,callback:function(t){e.$set(e.form,"personType",t)},expression:"form.personType"}},e._l(e.personTypeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{prop:"job"}},[n("el-input",{attrs:{size:e.SIZE,placeholder:"请选择工种",clearable:""},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1)],1),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:e.SIZE},on:{click:e.search}},[e._v(" 搜索 ")])],1),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:e.SIZE},on:{click:function(t){return e.reset("form")}}},[e._v(" 重置 ")])],1)],1)],1),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"header_search"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:e.SIZE},on:{click:e.add}},[e._v(" 添加 ")])],1)])],1)],1)],1),n("div",{staticClass:"table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-dblclick":e.dbTable}},[n("el-table-column",{attrs:{label:"人员类别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("personTypeFilter")(t.row))+" ")]}}])}),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),n("el-table-column",{attrs:{label:"性别",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("userSexFilter")(t.row))+" ")]}}])}),n("el-table-column",{attrs:{prop:"company",label:"单位"}}),n("el-table-column",{attrs:{prop:"duty",label:"职务",width:"60"}}),n("el-table-column",{attrs:{prop:"job",label:"工种",width:"100"}}),n("el-table-column",{attrs:{prop:"personId",label:"定位标签编号"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"120"}}),n("el-table-column",{attrs:{prop:"idCard",label:"身份证",width:"150"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[null===t.row.personId||""===t.row.personId||void 0===t.row.personId?n("el-button",{attrs:{size:e.SIZE,type:"primary",disabled:e._f("statusFilter")(t.row)},on:{click:function(n){return e.grantAuthorization(t.$index,t.row)}}},[e._v(" 授权 ")]):n("div",{staticClass:"flagClass"},[e._v(" 已授权 ")]),n("el-button",{attrs:{size:e.SIZE,type:"success",disabled:e._f("statusFilter")(t.row)},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v(" 编辑 ")]),n("el-button",{attrs:{size:e.SIZE,type:"danger",disabled:e._f("statusFilter")(t.row)},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1)],1),n("div",{staticClass:"paging"},[n("el-pagination",{attrs:{size:e.SIZE,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("div",{staticClass:"dialog"},[n("el-dialog",{attrs:{title:"授权",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[n("el-form",{ref:"authorizationCode",staticClass:"demo-ruleForm",attrs:{model:e.authorizationCode,rules:e.authorizationCodeRules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"定位标签编号",prop:"code"}},[n("el-input",{model:{value:e.authorizationCode.code,callback:function(t){e.$set(e.authorizationCode,"code",t)},expression:"authorizationCode.code"}})],1)],1),n("div",{staticClass:"infoUserPage_bottom"},[n("el-button",{on:{click:e.cancelCode}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.preservationCode("authorizationCode")}}},[e._v(" 保存 ")])],1)],1)],1)])])],1)],1)},i=[],s=(n("e439"),n("ac1f"),n("841c"),n("96cf"),n("1da1")),l=n("5530"),c=n("63ae"),u=n("9a36"),d=n("3cfe"),p=n("5880"),f=n("dcb8"),b=n("0962"),h={name:"InfoUser",data:function(){return{props:{label:"name",children:"zones",isLeaf:"leaf"},form:{company:"",duty:"",job:"",keyQuery:"",personType:""},SIZE:u["a"].SIZE,tableData:[],currentPage:1,pageSizes:[10,30,50,80],pageSize:10,total:0,dialogTableVisible:!1,authorizationCode:{code:null},authorizationCodeRules:{code:{required:!0,message:"请输入定位标签编号",trigger:"blur"}},infoUser:null,personTypeList:b["g"].userType()}},mounted:function(){this.search()},methods:(r=Object(f["a"])("该操作无法撤销，是否继续删除","提示",(function(){})),a=Object(l["a"])(Object(l["a"])({},Object(p["mapMutations"])({SET_USERINFO:"infoUser/SET_USERINFO"})),{},{loadNode:function(e,t){if(0===e.level)return t([{name:"所有",id:0}]);if(e.level>1){if(1===e.id)return t([{name:"某某人",id:21,leaf:!0}]);if(2===e.id)return t([{name:"某某人2",id:22,leaf:!0}]);if(3===e.id)return t([{name:"某某人3",id:23,leaf:!0}])}setTimeout((function(){var e=[{name:"门卫区域",id:2},{name:"技术资源整合中心",id:3},{name:"市场综合服务部",id:4}];t(e)}),500)},search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["c"])({company:e.form.company,duty:e.form.duty,idCard:"",job:e.form.job,limit:e.pageSize,keyQuery:e.form.keyQuery,order:"",page:e.currentPage,personId:"",personType:e.form.personType,phone:"",sex:"",sort:"",status:1});case 2:n=t.sent,e.total=n.data.total,e.tableData=n.data.list;case 5:case"end":return t.stop()}}),t)})))()},reset:function(e){this.$refs[e].resetFields(),this.search()},add:function(){this.$router.push({name:"info",params:{type:"xz"}})},grantAuthorization:function(e,t){this.infoUser=Object(l["a"])({},t),this.dialogTableVisible=!0},cancelCode:function(){this.dialogTableVisible=!1},preservationCode:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.infoUser.personId=t.authorizationCode.code,Object(d["f"])(t.infoUser).then((function(){t.dialogTableVisible=!1,t.search()})).catch((function(e){}))}))},handleEdit:function(e,t){this.SET_USERINFO(Object(l["a"])({},t)),this.$router.push({name:"info",params:{type:"bj",personId:t.personId}})},handleDelete:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])({personId:t.personId,status:0});case 2:n.search();case 3:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(e){this.pageSize=e,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()},append:function(e){},remove:function(e,t){},getUserInfo:function(e){this.SET_USERINFO(Object(l["a"])({},this.infoUser)),this.$router.push({name:"info",params:{type:"yl",personId:e.personId}})},dbTable:function(e){this.SET_USERINFO(Object(l["a"])({},e)),this.$router.push({name:"info",params:{type:"ck",personId:e.personId}})}}),Object(c["a"])(a,"handleDelete",[r],Object.getOwnPropertyDescriptor(a,"handleDelete"),a),a)},m=h,v=(n("1522"),n("2877")),y=Object(v["a"])(m,o,i,!1,null,"446afd96",null);t["default"]=y.exports}}]);