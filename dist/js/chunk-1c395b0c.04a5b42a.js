(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c395b0c"],{"046a":function(e,r,t){"use strict";var n=t("c9e5"),o=t.n(n);o.a},"3cfe":function(e,r,t){"use strict";t.d(r,"a",(function(){return o})),t.d(r,"b",(function(){return s})),t.d(r,"c",(function(){return i})),t.d(r,"f",(function(){return l})),t.d(r,"e",(function(){return u})),t.d(r,"d",(function(){return a}));t("99af");var n=t("b775"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/person/addPerson",e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/person/deletePerson/".concat(e.personId,"/").concat(e.status),e)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/person/queryPerson",e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/person/updatePerson",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/person/queryPersonByAddJob",e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/person/queryPersonAll",e)}},c9e5:function(e,r,t){},d2b0:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"infoUserPage"},[t("div",{staticClass:"infoUserPage_top"},[t("div",{staticClass:"infoUserPage_top_info"},[t("h3",[e._v("基本信息")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"left",disabled:e.DISABLED}},[t("el-form-item",{attrs:{label:"人员类别",prop:"personType"}},[t("el-select",{attrs:{placeholder:"请选择人员类别"},model:{value:e.ruleForm.personType,callback:function(r){e.$set(e.ruleForm,"personType",r)},expression:"ruleForm.personType"}},e._l(e.personTypeList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择人员性别"},model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},e._l(e.sexList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"单位名称",prop:"company"}},[t("el-input",{model:{value:e.ruleForm.company,callback:function(r){e.$set(e.ruleForm,"company",r)},expression:"ruleForm.company"}})],1),t("el-form-item",{attrs:{label:"职务",prop:"duty"}},[t("el-input",{model:{value:e.ruleForm.duty,callback:function(r){e.$set(e.ruleForm,"duty",r)},expression:"ruleForm.duty"}})],1),t("el-form-item",{attrs:{label:"工种",prop:"job"}},[t("el-input",{model:{value:e.ruleForm.job,callback:function(r){e.$set(e.ruleForm,"job",r)},expression:"ruleForm.job"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),t("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[t("el-input",{model:{value:e.ruleForm.idCard,callback:function(r){e.$set(e.ruleForm,"idCard",r)},expression:"ruleForm.idCard"}})],1)],1)],1),e._m(0)]),t("div",{staticClass:"infoUserPage_bottom"},[t("el-button",{attrs:{disabled:e.DISABLED},on:{click:e.cancel}},[e._v(" 取消 ")]),t("el-button",{attrs:{type:"primary",disabled:e.DISABLED},on:{click:function(r){return e.preservation("ruleForm")}}},[e._v(" 保存 ")])],1)])},o=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"infoUserPage_top_infoLog"},[t("h3",[e._v("安全培训记录")])])}],s=(t("7db0"),t("d3b7"),t("5530")),i=t("3cfe"),l=t("5880"),u=t("0962"),a={name:"InfoUserPage",data:function(){return{ruleForm:{personType:"",name:"",sex:"",company:"",duty:"",job:"",phone:"",idCard:""},rules:{personType:[{required:!0,message:"请输入人员类别",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请输入性别",trigger:"blur"}],company:[{required:!0,message:"请输入单位名称",trigger:"blur"}],duty:[{required:!0,message:"请输入职务",trigger:"blur"}],job:[{required:!0,message:"请输入工种",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证",trigger:"blur"}]},type:null,personId:null,DISABLED:!1,personTypeList:u["g"].userType(),sexList:u["g"].userSex()}},mounted:function(){if(this.type=this.$route.params.type,this.personId=this.$route.params.personId,"xz"===this.type)for(var e in this.ruleForm)this.$set(this.ruleForm,e,"");else if("bj"===this.type)for(var r in this.userInfo)this.$set(this.ruleForm,r,this.userInfo[r]);else if("ck"===this.type)for(var t in this.DISABLED=!0,this.userInfo)this.$set(this.ruleForm,t,this.userInfo[t])},methods:{cancel:function(){var e=this.$router.currentRoute.fullPath,r=this.visitedViews.find((function(r){return r.fullPath==e}));this.$EventBus.$emit("closeSelectedTag",Object(s["a"])({},r))},preservation:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;"xz"===r.type?(r.ruleForm.status=1,Promise.resolve(r.addUserInfo.call(r,r.ruleForm)).then((function(){r.cancel()})).catch((function(e){}))):"bj"===r.type&&(r.ruleForm.updateTime&&delete r.ruleForm.updateTime,r.ruleForm.updateUser&&delete r.ruleForm.updateUser,Promise.resolve(r.setUserInfo.call(r,r.ruleForm)).then((function(){r.cancel()})).catch((function(e){}))),r.cancel()}))},setUserInfo:function(e){return new Promise((function(r,t){Object(i["f"])(e).then((function(){r()})).catch((function(e){t(e)}))}))},addUserInfo:function(e){return new Promise((function(r,t){Object(i["a"])(e).then((function(){r()})).catch((function(e){t(e)}))}))},getUserInfo:function(){}},computed:Object(s["a"])({},Object(l["mapState"])({userInfo:function(e){return e.infoUser.userInfo},visitedViews:function(e){return e.tagsView.visitedViews}}))},c=a,m=(t("046a"),t("2877")),p=Object(m["a"])(c,n,o,!1,null,"140eccce",null);r["default"]=p.exports}}]);