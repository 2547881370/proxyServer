(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cfb14db"],{"33e0":function(e,t,n){"use strict";n.r(t);var r,i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"routeConfg"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"bg-purple routeConfg_left"},[n("h3",[e._v("基本信息")]),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"left",disabled:e.DISABLED}},[n("el-form-item",{attrs:{label:"线路名称",prop:"lineName"}},[n("el-input",{model:{value:e.ruleForm.lineName,callback:function(t){e.$set(e.ruleForm,"lineName",t)},expression:"ruleForm.lineName"}})],1),n("el-form-item",{attrs:{label:"线路类型",prop:"lineType"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.lineType,callback:function(t){e.$set(e.ruleForm,"lineType",t)},expression:"ruleForm.lineType"}},e._l(e.lineTypeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"线路区域",prop:"lineArea"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.lineArea,callback:function(t){e.$set(e.ruleForm,"lineArea",t)},expression:"ruleForm.lineArea"}},e._l(e.lineAreaList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"开放时间"}},[n("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":e.DATE_TIME_FMT},on:{change:e.timeline},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1),n("div",{staticClass:"bottom"},[n("el-button",{attrs:{size:e.SIZE},on:{click:e.cancel}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary",size:e.SIZE},on:{click:function(t){return e.preservation("ruleForm")}}},[e._v(" 确定 ")])],1)],1)]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"bg-purple routeConfg_map"},[e._v(" 模型图 ")])])],1)],1)},l=[],o=(n("7db0"),n("e439"),n("b64b"),n("d3b7"),n("96cf"),n("1da1")),s=n("5530"),u=n("63ae"),c=n("73c1"),f=n("6d0a"),m=n("9a36"),d=n("5880"),p=n("0962"),h={name:"RouteConfg",data:function(){return{ruleForm:{lineName:"",lineType:"",lineArea:"",time:[new Date,new Date]},rules:{lineName:[{required:!0,message:"请输入线路名称",trigger:"blur"}],lineType:[{required:!0,message:"请选择线路类型",trigger:"chage"}],lineArea:[{required:!0,message:"请选择线路区域",trigger:"chage"}],time:[{required:!0,message:"请选择开放时间",trigger:"chage"}]},SIZE:m["a"].SIZE,type:null,lineId:null,DISABLED:!1,DATE_TIME_FMT:"yyyy-MM-dd HH:mm:ss",lineTypeList:p["e"].lineTypeList(),lineAreaList:p["e"].lineAreaList()}},methods:(r=Object(c["b"])(1e3,{leading:!0}),i={cancel:function(){var e=this.$router.currentRoute.fullPath,t=this.visitedViews.find((function(t){return t.fullPath==e}));this.$EventBus.$emit("closeSelectedTag",Object(s["a"])({},t))},preservation:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;delete t.ruleForm.time;var n=Object(s["a"])({},t.ruleForm);"bj"==t.type?Promise.resolve(t.setInfoVehicle.call(t,n)).then((function(){t.cancel()})).catch((function(e){})):"xz"==t.type&&(n.route={open:!0,points:[{x:0,y:0}]},n.status=1,Promise.resolve(t.addInfoVehicle.call(t,n)).then((function(){t.cancel()})).catch((function(e){})))}))},addInfoVehicle:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){Object(f["a"])(e).then((function(){t()})).catch((function(e){n(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},setInfoVehicle:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){Object(f["e"])(e).then((function(){t()})).catch((function(e){n(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},getInfoCamera:function(e){var t=this;Object(f["d"])({lineId:e}).then((function(e){var n=e.data[0];if(n&&Object.keys(n).length>0)for(var r in n)"lineType"!==r&&"lineArea"!==r||(n[r]=n[r]&&1*n[r]),t.$set(t.ruleForm,r,n[r])})).catch((function(e){}))},timeline:function(e){this.$set(this.ruleForm,"openTime",e[0]),this.$set(this.ruleForm,"closeTime",e[1])}},Object(u["a"])(i,"preservation",[r],Object.getOwnPropertyDescriptor(i,"preservation"),i),i),mounted:function(){if(this.type=this.$route.params.type,this.lineId=this.$route.params.lineId,"xz"===this.type){for(var e in this.ruleForm)this.$set(this.ruleForm,e,"");this.$set(this.ruleForm,"status",1)}else"bj"===this.type?this.getInfoCamera(this.lineId):"ck"===this.type&&(this.DISABLED=!0,this.getInfoCamera(this.lineId))},computed:Object(s["a"])({},Object(d["mapState"])({visitedViews:function(e){return e.tagsView.visitedViews}}))},b=h,g=(n("758a"),n("2877")),v=Object(g["a"])(b,a,l,!1,null,"3f5ae707",null);t["default"]=v.exports},"6d0a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));n("99af");var r=n("b775"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/lineConfig/addLineConfig",e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/lineConfig/deleteLineConfig/".concat(e.lineId,"/").concat(e.status),e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/lineConfig/queryLineConfig",e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/lineConfig/queryLineConfigDetail/".concat(e.lineId),e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["b"])("/lineConfig/updateLineConfig",e)}},"758a":function(e,t,n){"use strict";var r=n("e5f6"),i=n.n(r);i.a},e5f6:function(e,t,n){}}]);