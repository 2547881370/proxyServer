(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-866f454c"],{"0a38":function(e,t,r){},"0a380":function(e,t,r){},"0f23":function(e,t,r){"use strict";var a=r("5d9c"),n=r.n(a);n.a},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"196e":function(e,t,r){"use strict";var a=r("e630"),n=r.n(a);n.a},"1de6":function(e,t,r){"use strict";var a=r("0a38"),n=r.n(a);n.a},"4c12":function(e,t,r){},"5a0c":function(e,t,r){!function(t,r){e.exports=r()}(0,(function(){"use strict";var e="millisecond",t="second",r="minute",a="hour",n="day",i="week",o="month",l="quarter",s="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,c=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,r){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(r)+e},h={s:d,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),a=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+d(a,2,"0")+":"+d(n,2,"0")},m:function(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,o),n=t-a<0,i=e.clone().add(r+(n?-1:1),o);return Number(-(r+(t-a)/(n?a-i:i-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:o,y:s,w:i,d:n,D:"date",h:a,m:r,s:t,ms:e,Q:l}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",p={};p[f]=m;var b=function(e){return e instanceof I},v=function(e,t,r){var a;if(!e)return f;if("string"==typeof e)p[e]&&(a=e),t&&(p[e]=t,a=e);else{var n=e.name;p[n]=e,a=n}return!r&&a&&(f=a),a||!r&&f},g=function(e,t){if(b(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new I(r)},y=h;y.l=v,y.i=b,y.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var I=function(){function d(e){this.$L=this.$L||v(e.locale,null,!0),this.parse(e)}var h=d.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(u);if(a)return r?new Date(Date.UTC(a[1],a[2]-1,a[3]||1,a[4]||0,a[5]||0,a[6]||0,a[7]||0)):new Date(a[1],a[2]-1,a[3]||1,a[4]||0,a[5]||0,a[6]||0,a[7]||0)}return new Date(t)}(e),this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return y},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var r=g(e);return this.startOf(t)<=r&&r<=this.endOf(t)},h.isAfter=function(e,t){return g(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<g(e)},h.$g=function(e,t,r){return y.u(e)?this[t]:this.set(r,e)},h.year=function(e){return this.$g(e,"$y",s)},h.month=function(e){return this.$g(e,"$M",o)},h.day=function(e){return this.$g(e,"$W",n)},h.date=function(e){return this.$g(e,"$D","date")},h.hour=function(e){return this.$g(e,"$H",a)},h.minute=function(e){return this.$g(e,"$m",r)},h.second=function(e){return this.$g(e,"$s",t)},h.millisecond=function(t){return this.$g(t,"$ms",e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,l){var u=this,c=!!y.u(l)||l,d=y.p(e),h=function(e,t){var r=y.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return c?r:r.endOf(n)},m=function(e,t){return y.w(u.toDate()[e].apply(u.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},f=this.$W,p=this.$M,b=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case s:return c?h(1,0):h(31,11);case o:return c?h(1,p):h(0,p+1);case i:var g=this.$locale().weekStart||0,I=(f<g?f+7:f)-g;return h(c?b-I:b+(6-I),p);case n:case"date":return m(v+"Hours",0);case a:return m(v+"Minutes",1);case r:return m(v+"Seconds",2);case t:return m(v+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(i,l){var u,c=y.p(i),d="set"+(this.$u?"UTC":""),h=(u={},u[n]=d+"Date",u.date=d+"Date",u[o]=d+"Month",u[s]=d+"FullYear",u[a]=d+"Hours",u[r]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[c],m=c===n?this.$D+(l-this.$W):l;if(c===o||c===s){var f=this.clone().set("date",1);f.$d[h](m),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else h&&this.$d[h](m);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[y.p(e)]()},h.add=function(e,l){var u,c=this;e=Number(e);var d=y.p(l),h=function(t){var r=g(c);return y.w(r.date(r.date()+Math.round(t*e)),c)};if(d===o)return this.set(o,this.$M+e);if(d===s)return this.set(s,this.$y+e);if(d===n)return h(1);if(d===i)return h(7);var m=(u={},u[r]=6e4,u[a]=36e5,u[t]=1e3,u)[d]||1,f=this.$d.getTime()+e*m;return y.w(f,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=y.z(this),n=this.$locale(),i=this.$H,o=this.$m,l=this.$M,s=n.weekdays,u=n.months,d=function(e,a,n,i){return e&&(e[a]||e(t,r))||n[a].substr(0,i)},h=function(e){return y.s(i%12||12,e,"0")},m=n.meridiem||function(e,t,r){var a=e<12?"AM":"PM";return r?a.toLowerCase():a},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:y.s(l+1,2,"0"),MMM:d(n.monthsShort,l,u,3),MMMM:d(u,l),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,s,2),ddd:d(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(i),HH:y.s(i,2,"0"),h:h(1),hh:h(2),a:m(i,o,!0),A:m(i,o,!1),m:String(o),mm:y.s(o,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:a};return r.replace(c,(function(e,t){return t||f[e]||a.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,u,c){var d,h=y.p(u),m=g(e),f=6e4*(m.utcOffset()-this.utcOffset()),p=this-m,b=y.m(this,m);return b=(d={},d[s]=b/12,d[o]=b,d[l]=b/3,d[i]=(p-f)/6048e5,d[n]=(p-f)/864e5,d[a]=p/36e5,d[r]=p/6e4,d[t]=p/1e3,d)[h]||p,c?b:y.a(b)},h.daysInMonth=function(){return this.endOf(o).$D},h.$locale=function(){return p[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),a=v(e,t,!0);return a&&(r.$L=a),r},h.clone=function(){return y.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},d}();return g.prototype=I.prototype,g.extend=function(e,t){return e(t,I,g),g},g.locale=v,g.isDayjs=b,g.unix=function(e){return g(1e3*e)},g.en=p[f],g.Ls=p,g}))},"5d9c":function(e,t,r){},"66b4":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return s}));r("99af");var a=r("b775"),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])("/car/addCar",e)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])("/car/deleteCar/".concat(e.carId,"/").concat(e.status),e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])("/car/queryCar",e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])("/car/updateCar",e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])("/car/queryCarByAuth",e)}},"841c":function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),i=r("1d80"),o=r("129f"),l=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var i=n(e),s=String(this),u=i.lastIndex;o(u,0)||(i.lastIndex=0);var c=l(i,s);return o(i.lastIndex,u)||(i.lastIndex=u),null===c?-1:c.index}]}))},aeea:function(e,t,r){"use strict";var a=r("0a380"),n=r.n(a);n.a},badb:function(e,t,r){"use strict";r.r(t);var a,n,i,o,l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"infoRegionalManagement"},[r("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"人员授权",name:"AuthorityByPerson"}}),r("el-tab-pane",{attrs:{label:"车辆授权",name:"AuthorityByCar"}})],1),r(e.activeName,{tag:"component"})],1)},s=[],u=r("5530"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"AuthorityByPerson"},[r("div",{staticClass:"header"},[r("el-form",{ref:"form",attrs:{model:e.form}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"keyQuery"}},[r("el-input",{attrs:{size:e.SIZE,placeholder:"请输入姓名/编号"},model:{value:e.form.keyQuery,callback:function(t){e.$set(e.form,"keyQuery",t)},expression:"form.keyQuery"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"bindUser"}},[r("el-input",{attrs:{size:e.SIZE,placeholder:"请输入操作员"},model:{value:e.form.bindUser,callback:function(t){e.$set(e.form,"bindUser",t)},expression:"form.bindUser"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{label:"已授权",value:1}}),r("el-option",{attrs:{label:"未授权",value:0}})],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"time"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":e.DATE_TIME_FMT},on:{change:e.timeline},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"authorTime"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始授权时间","end-placeholder":"接触授权时间","value-format":e.DATE_TIME_FMT},on:{change:e.authorTimeLine},model:{value:e.form.authorTime,callback:function(t){e.$set(e.form,"authorTime",t)},expression:"form.authorTime"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:e.SIZE},on:{click:e.search}},[e._v(" 搜索 ")])],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:e.SIZE},on:{click:function(t){return e.reset("form")}}},[e._v(" 重置 ")])],1)],1)],1),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"header_search"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:e.SIZE},on:{click:e.add}},[e._v(" 添加 ")])],1)])],1)],1)],1),r("div",{staticClass:"table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-dblclick":e.dbTable}},[r("el-table-column",{attrs:{label:"人员姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),r("el-table-column",{attrs:{prop:"deviceId",label:"定位标签编号"}}),r("el-table-column",{attrs:{prop:"status",label:"标签状态"}}),r("el-table-column",{attrs:{prop:"authorStart",label:"开始时间"}}),r("el-table-column",{attrs:{label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("authorEndFilter")(t.row))+" ")]}}])}),r("el-table-column",{attrs:{prop:"allowAreaId",label:"允许进出区域"}}),r("el-table-column",{attrs:{prop:"allowLineId",label:"允许行走路线"}}),r("el-table-column",{attrs:{prop:"allowParkId",label:"允许停止泊位"}}),r("el-table-column",{attrs:{prop:"bindTime",label:"授权时间"}}),r("el-table-column",{attrs:{prop:"cancelTime",label:"解除授权时间"}}),r("el-table-column",{attrs:{prop:"bindUser",label:"授权操作员"}}),r("el-table-column",{attrs:{prop:"cancelUser",label:"解除授权操作员"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:e.SIZE,type:"danger",disabled:e._f("cancelTimeFilter")(t.row)},on:{click:function(r){return e.releaseAuthorization(t.$index,t.row)}}},[e._v(" 解除授权 ")])]}}])})],1)],1),r("div",{staticClass:"paging"},[r("el-pagination",{attrs:{size:e.SIZE,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.dialogTableVisible?r("div",{staticClass:"dialog"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogTableVisible,width:"600px","destroy-on-close":!0},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("operation-post",{attrs:{info:e.info,type:e.type,_default:e.DISABLED},on:{cancel:e.cancel,preservation:e.preservation}})],1)],1):e._e()])},d=[],h=(r("e439"),r("ac1f"),r("841c"),r("96cf"),r("1da1")),m=r("63ae"),f=r("9a36"),p=(r("99af"),r("b775")),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/addAuthorityByCar",e)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/addAuthorityByPerson",e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/deleteAuthorityByCar/".concat(e.authorityId,"/").concat(e.status),e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/deleteAuthorityByPerson/".concat(e.authorityId,"/").concat(e.status),e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/queryAuthorityByCar",e)},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["b"])("/authority/queryAuthorityByPerson",e)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["a"])("/person/queryPersonByAuth",e)},T=r("73c1"),F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"operationPost"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,disabled:e._default,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"人员姓名",prop:"personName"}},[r("el-select",{attrs:{placeholder:"请选择人员姓名"},model:{value:e.ruleForm.authorId,callback:function(t){e.$set(e.ruleForm,"authorId",t)},expression:"ruleForm.authorId"}},e._l(e.personNameList,(function(e){return r("el-option",{key:e.personId,attrs:{label:e.name,value:e.personId}})})),1)],1),r("el-form-item",{attrs:{label:"定位标签编号",prop:"deviceId"}},[r("el-input",{model:{value:e.ruleForm.deviceId,callback:function(t){e.$set(e.ruleForm,"deviceId",t)},expression:"ruleForm.deviceId"}})],1),r("el-form-item",{attrs:{label:"有效周期",prop:"source"}},[r("el-radio-group",{on:{change:e.changeRadio},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},[r("el-radio",{attrs:{label:1}},[e._v(" 长期有效 ")]),r("el-radio",{attrs:{label:2}},[e._v(" 短期有效 ")])],1)],1),2===e.ruleForm.source?r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始授权时间","end-placeholder":"接触授权时间","value-format":e.DATE_TIME_FMT},on:{change:e.authorTimeLine},model:{value:e.ruleForm.authorTime,callback:function(t){e.$set(e.ruleForm,"authorTime",t)},expression:"ruleForm.authorTime"}})],1):e._e(),r("el-form-item",{attrs:{label:"允许进出区域",prop:"allowAreaId"}},[r("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.ruleForm.allowAreaId,callback:function(t){e.$set(e.ruleForm,"allowAreaId",t)},expression:"ruleForm.allowAreaId"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"允许行走路线",prop:"allowLineId"}},[r("el-input",{model:{value:e.ruleForm.allowLineId,callback:function(t){e.$set(e.ruleForm,"allowLineId",t)},expression:"ruleForm.allowLineId"}})],1),r("div",{staticClass:"bottom"},[r("el-button",{attrs:{size:e.SIZE},on:{click:e.cancel}},[e._v(" 取消 ")]),r("el-button",{attrs:{type:"primary",size:e.SIZE},on:{click:function(t){return e.preservation("ruleForm")}}},[e._v(" 确定 ")])],1)],1)],1)},S=[],k=(r("c975"),r("a15b"),r("b64b"),r("d3b7"),r("1276"),r("c466")),A={name:"OperationPost",props:{info:{type:[Object]},type:{type:[String],default:""},_default:{type:[Boolean],default:!1}},data:function(){return{ruleForm:{authorId:null,deviceId:null,source:2,authorTime:null,allowAreaId:null,allowLineId:null},rules:{authorId:[{required:!0,message:"请输入人员姓名",trigger:"blur"}],deviceId:[{required:!0,message:"请输入定位标签编号",trigger:"blur"}],source:[{required:!0,message:"请输入有效周期",trigger:"chage"}],allowAreaId:[{required:!0,message:"请输入允许进出区域",trigger:"blur"}],allowLineId:[{required:!0,message:"请输入允许行走路线",trigger:"blur"}]},SIZE:f["a"].SIZE,checkAll:!1,isIndeterminate:!0,week_choice_status:!1,DATE_TIME_FMT:"yyyy-MM-dd HH:mm:ss",options:[{value:"1",label:"A区域"},{value:"2",label:"B区域"}],personNameList:[]}},watch:{info:{handler:function(e){if(e&&Object.keys(e).length>0){var t=e.authorId,r=e.deviceId,a=e.allowAreaId,n=e.allowLineId,i=e.authorEnd,o=e.authorStart;this.$set(this.ruleForm,"authorId",t),this.$set(this.ruleForm,"deviceId",r),this.$set(this.ruleForm,"allowAreaId",a.split(",")),this.$set(this.ruleForm,"allowLineId",n),-1!=i.indexOf("2099")&&this.$set(this.ruleForm,"source",1);var l=[];l.push(Object(k["b"])(o,k["a"])),l.push(Object(k["b"])(i,k["a"])),this.$set(this.ruleForm,"authorTime",l)}else for(var s in this.ruleForm)this.$set(this.ruleForm,s,null)},immediate:!0}},created:function(){this.getUserList()},methods:{cancel:function(){this.$emit("cancel")},preservation:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(delete t.ruleForm.authorTime,delete t.ruleForm.source,t.ruleForm.authorType=1,"bj"===t.type&&t.$emit("preservation"),"tj"===t.type){t.ruleForm.allowAreaId&&Array.isArray(t.ruleForm.allowAreaId)&&(t.ruleForm.allowAreaId=t.ruleForm.allowAreaId.join(","));var r=Promise.resolve(t.addInfo.call(t,t.ruleForm));r.then((function(e){t.$emit("preservation")})).catch((function(e){}))}}))},addInfo:function(e){return new Promise((function(t,r){v(e).then((function(e){t(e)})).catch((function(e){r(e)}))}))},authorTimeLine:function(e){this.$set(this.ruleForm,"authorStart",e[0]),this.$set(this.ruleForm,"authorEnd",e[1])},changeRadio:function(e){1===e&&(this.$set(this.ruleForm,"authorStart",Object(k["b"])(new Date,k["a"])),this.$set(this.ruleForm,"authorEnd","2099-09-19 15:45:48"))},getUserList:function(){var e=this;w().then((function(t){e.personNameList=t.data})).catch((function(e){}))}}},_=A,E=(r("1de6"),r("2877")),D=Object(E["a"])(_,F,S,!1,null,"5ea19838",null),M=D.exports,O={name:"AuthorityByPerson",components:{operationPost:M},data:function(){return{form:{keyQuery:"",bindUser:"",status:"",time:"",authorTime:"",authorStart:"",authorEnd:"",bindTime:"",cancelTime:""},SIZE:f["a"].SIZE,tableData:[],currentPage:1,pageSizes:[10,30,50,80],pageSize:10,total:0,dialogTableVisible:!1,title:"",info:null,type:null,DISABLED:null,DATE_TIME_FMT:"yyyy-MM-dd HH:mm:ss"}},methods:(a=Object(T["a"])("该操作无法撤销，是否继续删除","提示",(function(){})),n={search:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$({allowAreaId:"",allowLineId:"",allowParkId:"",authorEnd:e.form.authorEnd,authorId:"",authorStart:e.form.authorStart,authorType:"",bindTime:e.form.bindTime,bindUser:e.form.bindUser,cancelTime:e.form.cancelTime,cancelUser:"",deviceId:"",driver:"",id:"",keyQuery:e.form.keyQuery,limit:e.pageSize,order:"",page:e.currentPage,sort:"",status:e.form.status,superCargo:"",ticket:""});case 2:r=t.sent,e.total=r.data.total,e.tableData=r.data.list;case 5:case"end":return t.stop()}}),t)})))()},reset:function(e){this.$refs[e].resetFields(),this.$set(this.form,"bindTime",""),this.$set(this.form,"cancelTime",""),this.$set(this.form,"authorStart",""),this.$set(this.form,"authorEnd",""),this.search()},add:function(){this.setOperationVehicle({info:{},type:"tj",DISABLED:!1}),this.dialogTableVisible=!0},handleSizeChange:function(e){this.pageSize=e,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()},releaseAuthorization:function(e,t){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y({authorityId:t.id,status:0});case 2:r.search();case 3:case"end":return e.stop()}}),e)})))()},cancel:function(){this.dialogTableVisible=!1},preservation:function(){this.dialogTableVisible=!1,this.search()},setOperationVehicle:function(e){var t=e.info,r=e.type,a=e.DISABLED;this.info=Object(u["a"])({},t),this.type=r,this.DISABLED=a},dbTable:function(e){this.setOperationVehicle({info:Object(u["a"])({},e),type:null,DISABLED:!0}),this.dialogTableVisible=!0},timeline:function(e){e&&Array.isArray(e)&&e.length>0?(this.$set(this.form,"authorStart",e[0]),this.$set(this.form,"authorEnd",e[1])):(this.$set(this.form,"authorStart",null),this.$set(this.form,"authorEnd",null))},authorTimeLine:function(e){e&&Array.isArray(e)&&e.length>0?(this.$set(this.form,"bindTime",e[0]),this.$set(this.form,"cancelTime",e[1])):(this.$set(this.form,"bindTime",null),this.$set(this.form,"cancelTime",null))}},Object(m["a"])(n,"releaseAuthorization",[a],Object.getOwnPropertyDescriptor(n,"releaseAuthorization"),n),n),mounted:function(){this.search()}},x=O,C=(r("aeea"),Object(E["a"])(x,c,d,!1,null,"ea0b8d10",null)),j=C.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"AuthorityByPerson"},[r("div",{staticClass:"header"},[r("el-form",{ref:"form",attrs:{model:e.form}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"keyQuery"}},[r("el-input",{attrs:{size:e.SIZE,placeholder:"请输入车牌号/驾驶员/押运员/编号/运单号"},model:{value:e.form.keyQuery,callback:function(t){e.$set(e.form,"keyQuery",t)},expression:"form.keyQuery"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"bindUser"}},[r("el-input",{attrs:{size:e.SIZE,placeholder:"请输入操作员"},model:{value:e.form.bindUser,callback:function(t){e.$set(e.form,"bindUser",t)},expression:"form.bindUser"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-form-item",{attrs:{prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{label:"已授权",value:1}}),r("el-option",{attrs:{label:"未授权",value:0}})],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"time"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":e.DATE_TIME_FMT},on:{change:e.timeline},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"authorTime"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始授权时间","end-placeholder":"接触授权时间","value-format":e.DATE_TIME_FMT},on:{change:e.authorTimeLine},model:{value:e.form.authorTime,callback:function(t){e.$set(e.form,"authorTime",t)},expression:"form.authorTime"}})],1)],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:e.SIZE},on:{click:e.search}},[e._v(" 搜索 ")])],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:e.SIZE},on:{click:function(t){return e.reset("form")}}},[e._v(" 重置 ")])],1)],1)],1),r("el-col",{attrs:{span:1}},[r("div",{staticClass:"header_search"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:e.SIZE},on:{click:e.add}},[e._v(" 添加 ")])],1)])],1)],1)],1),r("div",{staticClass:"table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-dblclick":e.dbTable}},[r("el-table-column",{attrs:{prop:"carNum",label:"车牌号"}}),r("el-table-column",{attrs:{prop:"driver",label:"驾驶员"}}),r("el-table-column",{attrs:{prop:"superCargo",label:"押运员"}}),r("el-table-column",{attrs:{prop:"deviceId",label:"授权设备编号"}}),r("el-table-column",{attrs:{prop:"status",label:"标签状态"}}),r("el-table-column",{attrs:{prop:"ticket",label:"电子运单信息"}}),r("el-table-column",{attrs:{prop:"authorStart",label:"开始时间"}}),r("el-table-column",{attrs:{label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("authorEndFilter")(t.row))+" ")]}}])}),r("el-table-column",{attrs:{prop:"allowAreaId",label:"允许进出区域"}}),r("el-table-column",{attrs:{prop:"allowLineId",label:"允许行走路线"}}),r("el-table-column",{attrs:{prop:"allowParkId",label:"允许停止泊位"}}),r("el-table-column",{attrs:{prop:"bindTime",label:"授权时间"}}),r("el-table-column",{attrs:{prop:"cancelTime",label:"解除授权时间"}}),r("el-table-column",{attrs:{prop:"bindUser",label:"授权操作员"}}),r("el-table-column",{attrs:{prop:"cancelUser",label:"解除授权操作员"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:e.SIZE,type:"danger",disabled:e._f("cancelTimeFilter")(t.row)},on:{click:function(r){return e.releaseAuthorization(t.$index,t.row)}}},[e._v(" 解除授权 ")])]}}])})],1)],1),r("div",{staticClass:"paging"},[r("el-pagination",{attrs:{size:e.SIZE,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("div",{staticClass:"dialog"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialogTableVisible,width:"600px","destroy-on-close":!0},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("operation-post",{attrs:{info:e.info,type:e.type,_default:e.DISABLED},on:{cancel:e.cancel,preservation:e.preservation}})],1)],1)])},z=[],P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"operationPost"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,disabled:e._default,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"车牌号",prop:"authorId"}},[r("el-select",{attrs:{placeholder:"请选择车牌号"},model:{value:e.ruleForm.authorId,callback:function(t){e.$set(e.ruleForm,"authorId",t)},expression:"ruleForm.authorId"}},e._l(e.authorIdList,(function(e){return r("el-option",{key:e.carId,attrs:{label:e.authorId,value:e.carId}})})),1)],1),r("el-form-item",{attrs:{label:"驾驶员",prop:"driver"}},[r("el-input",{model:{value:e.ruleForm.driver,callback:function(t){e.$set(e.ruleForm,"driver",t)},expression:"ruleForm.driver"}})],1),r("el-form-item",{attrs:{label:"押运员"}},[r("el-input",{model:{value:e.ruleForm.superCargo,callback:function(t){e.$set(e.ruleForm,"superCargo",t)},expression:"ruleForm.superCargo"}})],1),r("el-form-item",{attrs:{label:"定位标签编号",prop:"deviceId"}},[r("el-input",{model:{value:e.ruleForm.deviceId,callback:function(t){e.$set(e.ruleForm,"deviceId",t)},expression:"ruleForm.deviceId"}})],1),r("el-form-item",{attrs:{label:"电子运单编号"}},[r("el-input",{model:{value:e.ruleForm.ticket,callback:function(t){e.$set(e.ruleForm,"ticket",t)},expression:"ruleForm.ticket"}})],1),r("el-form-item",{attrs:{label:"有效周期",prop:"source"}},[r("el-radio-group",{on:{change:e.changeRadio},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},[r("el-radio",{attrs:{label:1}},[e._v(" 长期有效 ")]),r("el-radio",{attrs:{label:2}},[e._v(" 短期有效 ")])],1)],1),2===e.ruleForm.source?r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始授权时间","end-placeholder":"接触授权时间","value-format":e.DATE_TIME_FMT},on:{change:e.authorTimeLine},model:{value:e.ruleForm.authorTime,callback:function(t){e.$set(e.ruleForm,"authorTime",t)},expression:"ruleForm.authorTime"}})],1):e._e(),r("el-form-item",{attrs:{label:"允许进出区域",prop:"allowAreaId"}},[r("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.ruleForm.allowAreaId,callback:function(t){e.$set(e.ruleForm,"allowAreaId",t)},expression:"ruleForm.allowAreaId"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"允许行走路线",prop:"allowLineId"}},[r("el-input",{model:{value:e.ruleForm.allowLineId,callback:function(t){e.$set(e.ruleForm,"allowLineId",t)},expression:"ruleForm.allowLineId"}})],1),r("el-form-item",{attrs:{label:"允许停止泊位",prop:"allowParkId"}},[r("el-input",{model:{value:e.ruleForm.allowParkId,callback:function(t){e.$set(e.ruleForm,"allowParkId",t)},expression:"ruleForm.allowParkId"}})],1),r("el-form-item",{attrs:{label:"允许停止时长"}},[r("el-input",{model:{value:e.ruleForm.allowParkIdTime,callback:function(t){e.$set(e.ruleForm,"allowParkIdTime",t)},expression:"ruleForm.allowParkIdTime"}})],1),r("div",{staticClass:"bottom"},[r("el-button",{attrs:{size:e.SIZE},on:{click:e.cancel}},[e._v(" 取消 ")]),r("el-button",{attrs:{type:"primary",size:e.SIZE},on:{click:function(t){return e.preservation("ruleForm")}}},[e._v(" 确定 ")])],1)],1)],1)},B=[],Z=r("66b4"),U={name:"OperationPost",props:{info:{type:[Object]},type:{type:[String],default:""},_default:{type:[Boolean],default:!1}},data:function(){return{ruleForm:{authorId:null,driver:null,superCargo:null,deviceId:null,ticket:null,source:2,authorTime:null,allowAreaId:null,allowLineId:null,allowParkId:null,allowParkIdTime:null},rules:{authorId:[{required:!0,message:"请输入车牌号",trigger:"blur"}],driver:[{required:!0,message:"请输入驾驶员",trigger:"blur"}],deviceId:[{required:!0,message:"请输入定位标签编号",trigger:"blur"}],source:[{required:!0,message:"请输入有效周期",trigger:"chage"}],allowAreaId:[{required:!0,message:"请输入允许进出区域",trigger:"blur"}],allowLineId:[{required:!0,message:"请输入允许行走路线",trigger:"blur"}],allowParkId:[{required:!0,message:"请输入允许停止泊位",trigger:"blur"}]},SIZE:f["a"].SIZE,checkAll:!1,isIndeterminate:!0,week_choice_status:!1,DATE_TIME_FMT:"yyyy-MM-dd HH:mm:ss",options:[{value:"1",label:"A区域"},{value:"2",label:"B区域"}],authorIdList:[]}},watch:{info:{handler:function(e){if(e&&Object.keys(e).length>0){var t=e.authorId,r=e.driver,a=e.superCargo,n=e.deviceId,i=e.allowAreaId,o=e.allowLineId,l=e.allowParkId,s=e.allowParkIdTime,u=e.authorEnd,c=e.authorStart,d=e.ticket;this.$set(this.ruleForm,"authorId",t),this.$set(this.ruleForm,"driver",r),this.$set(this.ruleForm,"superCargo",a),this.$set(this.ruleForm,"deviceId",n),this.$set(this.ruleForm,"allowAreaId",i),this.$set(this.ruleForm,"allowLineId",o),this.$set(this.ruleForm,"allowParkId",l),this.$set(this.ruleForm,"allowParkIdTime",s),this.$set(this.ruleForm,"ticket",d),-1!=u.indexOf("2099")&&this.$set(this.ruleForm,"source",1);var h=[];h.push(Object(k["b"])(c,k["a"])),h.push(Object(k["b"])(u,k["a"])),this.$set(this.ruleForm,"authorTime",h)}else for(var m in this.ruleForm)this.$set(this.ruleForm,m,null)},immediate:!0}},created:function(){this.getCarByAuth()},methods:{cancel:function(){this.$emit("cancel")},preservation:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(delete t.ruleForm.authorTime,delete t.ruleForm.source,delete t.ruleForm.allowParkIdTime,t.ruleForm.authorType=2,"bj"===t.type&&t.$emit("preservation"),"tj"===t.type){t.ruleForm.allowAreaId&&Array.isArray(t.ruleForm.allowAreaId)&&(t.ruleForm.allowAreaId=t.ruleForm.allowAreaId.join(","));var r=Promise.resolve(t.addInfo.call(t,t.ruleForm));r.then((function(e){t.$emit("preservation")})).catch((function(e){}))}}))},addInfo:function(e){return new Promise((function(t,r){b(e).then((function(e){t(e)})).catch((function(e){r(e)}))}))},authorTimeLine:function(e){this.$set(this.ruleForm,"authorStart",e[0]),this.$set(this.ruleForm,"authorEnd",e[1])},changeRadio:function(e){1===e&&(this.$set(this.ruleForm,"authorStart",Object(k["b"])(new Date,k["a"])),this.$set(this.ruleForm,"authorEnd","2099-09-19 15:45:48"))},getCarByAuth:function(){var e=this;Object(Z["d"])().then((function(t){e.authorIdList=t.data})).catch((function(e){}))}}},V=U,H=(r("eb54"),Object(E["a"])(V,P,B,!1,null,"e330d6ce",null)),Y=H.exports,N={name:"AuthorityByPerson",components:{operationPost:Y},data:function(){return{form:{keyQuery:"",bindUser:"",status:"",time:"",authorTime:"",authorStart:"",authorEnd:"",bindTime:"",cancelTime:""},SIZE:f["a"].SIZE,tableData:[],currentPage:1,pageSizes:[10,30,50,80],pageSize:10,total:0,dialogTableVisible:!1,title:"",info:null,type:null,DISABLED:null,DATE_TIME_FMT:"yyyy-MM-dd HH:mm:ss"}},methods:(i=Object(T["a"])("该操作无法撤销，是否继续删除","提示",(function(){})),o={search:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I({allowAreaId:"",allowLineId:"",allowParkId:"",authorEnd:e.form.authorEnd,authorId:"",authorStart:e.form.authorStart,authorType:"",bindTime:e.form.bindTime,bindUser:e.form.bindUser,cancelTime:e.form.cancelTime,cancelUser:"",deviceId:"",driver:"",id:"",keyQuery:e.form.keyQuery,limit:e.pageSize,order:"",page:e.currentPage,sort:"",status:e.form.status,superCargo:"",ticket:""});case 2:r=t.sent,e.total=r.data.total,e.tableData=r.data.list;case 5:case"end":return t.stop()}}),t)})))()},reset:function(e){this.$refs[e].resetFields(),this.$set(this.form,"bindTime",""),this.$set(this.form,"cancelTime",""),this.$set(this.form,"authorStart",""),this.$set(this.form,"authorEnd",""),this.search()},add:function(){this.setOperationVehicle({info:{},type:"tj",DISABLED:!1}),this.dialogTableVisible=!0},handleSizeChange:function(e){this.pageSize=e,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()},releaseAuthorization:function(e,t){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g({authorityId:t.id,status:0});case 2:r.search();case 3:case"end":return e.stop()}}),e)})))()},cancel:function(){this.dialogTableVisible=!1},preservation:function(){this.dialogTableVisible=!1,this.search()},setOperationVehicle:function(e){var t=e.info,r=e.type,a=e.DISABLED;this.info=Object(u["a"])({},t),this.type=r,this.DISABLED=a},dbTable:function(e){this.setOperationVehicle({info:Object(u["a"])({},e),type:null,DISABLED:!0}),this.dialogTableVisible=!0},timeline:function(e){e&&Array.isArray(e)&&e.length>0?(this.$set(this.form,"authorStart",e[0]),this.$set(this.form,"authorEnd",e[1])):(this.$set(this.form,"authorStart",null),this.$set(this.form,"authorEnd",null))},authorTimeLine:function(e){e&&Array.isArray(e)&&e.length>0?(this.$set(this.form,"bindTime",e[0]),this.$set(this.form,"cancelTime",e[1])):(this.$set(this.form,"bindTime",null),this.$set(this.form,"cancelTime",null))}},Object(m["a"])(o,"releaseAuthorization",[i],Object.getOwnPropertyDescriptor(o,"releaseAuthorization"),o),o),mounted:function(){this.search()}},q=N,R=(r("0f23"),Object(E["a"])(q,L,z,!1,null,"afb3e530",null)),Q=R.exports,W=r("5880"),J={name:"BaseStation",components:{AuthorityByPerson:j,AuthorityByCar:Q},methods:Object(u["a"])({},Object(W["mapMutations"])({SET_ACTIVENAME:"infoRegionalManagement/SET_ACTIVENAME"})),computed:{activeName:{get:function(){return this.$store.state.infoRegionalManagement.activeName},set:function(e){this.SET_ACTIVENAME(e)}}}},G=J,K=(r("196e"),Object(E["a"])(G,l,s,!1,null,"16b49e8c",null));t["default"]=K.exports},c466:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return u}));r("d3b7"),r("ac1f"),r("25f0"),r("5319");var a=r("5a0c"),n=r.n(a),i="YYYY-MM-DD HH:mm:ss",o="YYYY-MM-DD",l=function(e){return"number"===typeof e},s=function(e){return l(e)?n()(e):n()(e,i)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return e?s(e).format(t):e}},e630:function(e,t,r){},eb54:function(e,t,r){"use strict";var a=r("4c12"),n=r.n(a);n.a}}]);