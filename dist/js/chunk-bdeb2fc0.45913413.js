(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdeb2fc0"],{"894c":function(e,t,r){},a9b9:function(e,t,r){"use strict";var n=r("894c"),i=r.n(n);i.a},b204:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return s}));r("99af");var n=r("b775"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/doorWay/addDoorWay",e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/doorWay/deleteJob/".concat(e.doorWayId,"/").concat(e.status),e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/doorWay/queryDoorWay",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])("/doorWay/updateDoorWay",e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])("/doorWay/queryDoorWayDetail/".concat(e.doorWayId))}},fd43:function(e,t,r){"use strict";r.r(t);var n,i,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"operation"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"bg-purple operation_left"},[r("h3",[e._v("添加设置")]),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"left",disabled:e.DISABLED}},[r("el-form-item",{attrs:{label:"卡口名称",prop:"doorName"}},[r("el-input",{model:{value:e.ruleForm.doorName,callback:function(t){e.$set(e.ruleForm,"doorName",t)},expression:"ruleForm.doorName"}})],1),r("el-form-item",{attrs:{label:"卡口设备",prop:"equipId"}},[r("el-select",{attrs:{placeholder:"请选择卡口设备"},model:{value:e.ruleForm.equipId,callback:function(t){e.$set(e.ruleForm,"equipId",t)},expression:"ruleForm.equipId"}},e._l(e.equipIdList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"卡口类型",prop:"type"}},[r("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-radio",{attrs:{label:0}},[e._v(" 双向卡口 ")]),r("el-radio",{attrs:{label:1}},[e._v(" 单向卡口 ")])],1)],1),r("el-form-item",{attrs:{prop:"config"}},[r("el-input",{model:{value:e.ruleForm.config,callback:function(t){e.$set(e.ruleForm,"config",t)},expression:"ruleForm.config"}})],1)],1),r("div",{staticClass:"bottom"},[r("el-button",{attrs:{size:e.SIZE},on:{click:e.cancel}},[e._v(" 取消 ")]),r("el-button",{attrs:{type:"primary",size:e.SIZE},on:{click:function(t){return e.preservation("ruleForm")}}},[e._v(" 确定 ")])],1)],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"bg-purple operation_map"},[r("div",{staticClass:"operation_map_button"},[e.pgLines&&!1!==e.pgLines.statusLines?r("el-button",{attrs:{type:"primary"},on:{click:e.endDrawLines}},[e._v(" 结束画线 ")]):r("el-button",{attrs:{type:"primary"},on:{click:e.drawLines}},[e._v(" 开始画线 ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.drawArrow}},[e._v(" 单向卡口 ")])],1),r("div",{staticClass:"trackPlaybackMap"},[null!==e.mapId&&void 0!==e.mapId?r("map-component",{ref:"pcMapView",staticStyle:{height:"100%",width:"100%"},attrs:{"map-id":e.mapId,"init-params":e.initParams},on:{startLoadingEve:e.startLoadingEve,endLoadingEve:e.endLoadingEve}}):e._e()],1)])])],1)],1)},a=[],u=(r("7db0"),r("e439"),r("b64b"),r("d3b7"),r("96cf"),r("1da1")),s=r("5530"),c=r("63ae"),l=r("73c1"),d=r("b204"),p=r("9a36"),m=r("5880"),f=r("9c88"),h=r("0962"),g={name:"Operation",data:function(){return{ruleForm:{doorName:"",equipId:"",type:"",config:""},rules:{doorName:[{required:!0,message:"请输入卡口名称",trigger:"blur"}],equipId:[{required:!0,message:"请选择卡口设备",trigger:"blur"}],type:[{required:!0,message:"请选择卡口类型",trigger:"chage"}],config:[{required:!0,message:"请绘制卡口区域",trigger:"blur"}]},SIZE:p["a"].SIZE,type:null,doorWayId:null,DISABLED:!1,mapId:"psop-yzhq",initParams:{cameraAt:{x:0,y:160,z:80}},mapInfo:null,qyMapGroup:null,pgLines:null,pgArrow:null,equipIdList:h["c"].equipIdList()}},methods:(n=Object(l["b"])(1e3,{leading:!0}),i={cancel:function(){var e=this.$router.currentRoute.fullPath,t=this.visitedViews.find((function(t){return t.fullPath===e}));this.$EventBus.$emit("closeSelectedTag",Object(s["a"])({},t))},preservation:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;delete t.ruleForm.config,"bj"==t.type?(t.ruleForm.direction=t.ruleForm.config,Promise.resolve(t.setInfoVehicle.call(t,t.ruleForm)).then((function(){t.cancel()})).catch((function(e){}))):"xz"==t.type&&(t.ruleForm.startLinePointDTO=[t.pgLines.line[0].geometry.boundingBox.max,t.pgLines.line[0].geometry.boundingBox.min],t.ruleForm.endLinePointDTO=[t.pgLines.line[1].geometry.boundingBox.max,t.pgLines.line[1].geometry.boundingBox.min],t.ruleForm.type=0,t.ruleForm.direction=t.ruleForm.config,t.ruleForm.status=1,Promise.resolve(t.addInfoVehicle.call(t,t.ruleForm)).then((function(){t.cancel()})).catch((function(e){})))}))},addInfoVehicle:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){Object(d["a"])(e).then((function(){t()})).catch((function(e){r(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},setInfoVehicle:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){Object(d["e"])(e).then((function(){t()})).catch((function(e){r(e)}))})));case 1:case"end":return t.stop()}}),t)})))()},getInfoCamera:function(e){var t=this;Object(d["d"])({doorWayId:e}).then((function(e){var r=e.data[0];if(r&&Object.keys(r).length>0)for(var n in r)"equipId"===n&&(r[n]=1*r[n]),t.$set(t.ruleForm,n,r[n])})).catch((function(e){}))},startLoadingEve:function(){if(!this.mapId)return!1;this.mapInfo=null,this.qyMapGroup=null},endLoadingEve:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return",!1);case 2:this.mapInfo=t,this.qyMapGroup=r;case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),drawLines:function(){this.pgLines?this.pgLines.startDraw():this.pgLines=this.qyMapGroup.startDrawLines(this.$refs.pcMapView)},endDrawLines:function(){this.pgLines.endDrawLines()},drawArrow:function(){this.pgLines&&this.pgLines.lineIndex>=2&&this.pgLines.drawSingleDirectionArrow()},endDrawArrow:function(){this.pgArrow.endDrawArrow(),this.pgArrow=null}},Object(c["a"])(i,"preservation",[n],Object.getOwnPropertyDescriptor(i,"preservation"),i),i),mounted:function(){if(this.type=this.$route.params.type,this.doorWayId=this.$route.params.doorWayId,"xz"===this.type)for(var e in this.ruleForm)this.$set(this.ruleForm,e,"");else"bj"===this.type?this.getInfoCamera(this.doorWayId):"ck"===this.type&&(this.DISABLED=!0,this.getInfoCamera(this.doorWayId))},computed:Object(s["a"])({},Object(m["mapState"])({visitedViews:function(e){return e.tagsView.visitedViews}})),components:{mapComponent:f["default"]}},b=g,v=(r("a9b9"),r("2877")),y=Object(v["a"])(b,o,a,!1,null,"01c2806d",null);t["default"]=y.exports}}]);